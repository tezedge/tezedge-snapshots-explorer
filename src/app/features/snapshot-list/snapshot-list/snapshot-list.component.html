<div class="snapshots-wrapper">
  <div class="flex-row flex-between align-center">
    <h2>Snapshots</h2>
    <div class="button-toggle-group p-relative"
         [ngClass]="'active-' + activeButtonIndex">
      <button *ngFor="let button of buttonTabs; let i=index"
              class="font-600 pointer f-12" [class.active]="i === activeButtonIndex"
              (click)="activeButtonIndex = i">{{ button }}</button>
    </div>
  </div>

  <div class="flex-row f-12 chip-example">
    <div class="chip blue margin-right-10">
      <mat-icon svgIcon="check" class="icon-12"></mat-icon>
      <div>OCTEST</div>
    </div>
    <div class="chip green">
      <mat-icon svgIcon="check" class="icon-12"></mat-icon>
      <div>TEZEDGE</div>
    </div>
    <div class="bar margin-left-10 margin-right-10 d-flex align-center font-300">|</div>
    <div class="chip gray margin-right-10 pointer" (click)="filterSnapshots('rolling')"
         [style.opacity]="filterType === 'full' ? 0.6 : 1">
      <mat-icon svgIcon="check" class="icon-12"></mat-icon>
      <div>ROLLING</div>
    </div>
    <div class="chip white pointer" (click)="filterSnapshots('full')"
         [style.opacity]="filterType === 'rolling' ? 0.6 : 1">
      <mat-icon svgIcon="check" class="icon-12"></mat-icon>
      <div>&nbsp;&nbsp;&nbsp;FULL&nbsp;&nbsp;&nbsp;</div>
    </div>
  </div>

  <mat-accordion [class.loading]="!snapshots">
    <mat-expansion-panel *ngFor="let snapshot of snapshots; let i=index"
                         hideToggle [expanded]="activePanel === i" [disabled]="activePanel === i"
                         [class.d-none]="filterType && snapshot.snapshot !== filterType"
                         (click)="updateOpenAccordionElement(i)">
      <mat-expansion-panel-header>
        <mat-panel-title class="flex-column accordion-paddings">
          <div class="panel-title-content flex-column align-stretch">
            <div class="padding-top-8 margin-bottom-5 f-12">{{ snapshot.datetime }}</div>
            <div class="row-content flex-row align-center f-12 padding-top-10 margin-bottom-10 align-center"
                 [class.open]="activePanel === i">
              <div fxFlex="200px" class="d-flex chips">
                <div class="chip green margin-right-10" *ngIf="false">
                  <div>TEZEDGE</div>
                </div>
                <div class="chip blue margin-right-10">
                  <div class="context-menu">OCTEST</div>
                </div>
                <div class="chip gray margin-right-10" *ngIf="snapshot.snapshot === 'rolling'">
                  <div>ROLLING</div>
                </div>
                <div class="chip white margin-right-10" *ngIf="snapshot.snapshot === 'full'">
                  <div>FULL</div>
                </div>
              </div>
              <a fxFlex
                 [matTooltip]="'https://snapshots-tezos.giganode.io/snapshots/' + snapshot.fileName"
                 matTooltipShowDelay="1000"
                 [href]="'https://snapshots-tezos.giganode.io/snapshots/' + snapshot.fileName"
                 class="truncate">{{ snapshot.fileName }}</a>
              <mat-icon fxFlex="50px" svgIcon="chevron-right" class="icon-14 panel-arrow"
                        [class.open]="activePanel === i"></mat-icon>
            </div>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <ng-template matExpansionPanelContent>
        <div class="f-12 content-truncate body accordion-paddings">
          <div class="d-flex flex-between">
            <div class="text-gray-63">Protocol</div>
            <div>{{ snapshot.protocol }}</div>
          </div>
          <div class="d-flex flex-between">
            <div class="text-gray-63">Node Version</div>
            <div>{{ snapshot.nodeVersion }}</div>
          </div>
          <div class="d-flex flex-between">
            <div class="text-gray-63">Blockhash</div>
            <div>{{ snapshot.blockHash }}</div>
          </div>
          <div class="d-flex flex-between">
            <div class="text-gray-63">Blocktime</div>
            <div>{{ snapshot.blockTime }}</div>
          </div>
          <div class="d-flex flex-between">
            <div class="text-gray-63">Blocknum</div>
            <div>{{ snapshot.blockNum }}</div>
          </div>
        </div>
        <div class="accordion-paddings">
          <div class="clone-sample margin-top-10 margin-bottom-10 padding-10 f-12 d-flex align-start">
            <div class="code">
              <div>
                # To restore testnet full snapshot from {{ snapshot.blockTime }}, blocknum: {{ snapshot.blockNum }},
                blockhash: {{ snapshot.blockHash }}
              </div>
              <div #code style="color: #e1782f">
                wget https://snapshots-tezos.giganode.io/snapshots/{{ snapshot.fileName }}
                tezos-node snapshot import --block {{ snapshot.blockHash }} {{ snapshot.fileName }} --rolling
              </div>
            </div>
            <div class="copy-button pointer padding-10 padding-top-8 padding-bottom-8 border-rad-4 font-600"
                 (click)="copyToClipboard(code)">Copy
            </div>
          </div>
        </div>
      </ng-template>
    </mat-expansion-panel>
  </mat-accordion>

</div>
